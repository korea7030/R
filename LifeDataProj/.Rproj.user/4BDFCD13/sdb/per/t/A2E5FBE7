{
    "contents" : "## 2014년1월1일 ~ 2014년12월31일(1년치 데이터)\n## 55~84세 고객의 구매내역(서울,경기,부산)\nsub2 <- read.table('subject2/1-2. 구매내역정보.txt', header=T, sep=\",\", stringsAsFactors = FALSE)\nstr(sub2)\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(reshape)\nlibrary(reshape2)\n\n############################################# 주제2 기본 EDA #################################################\nprocate1<- as.data.frame(table(sub2$상품대분류명))\n# 가구 가전제품   레포츠     명품 생활잡화     식품 의류잡화 \n# 734    11006     8015     1226    10086    38597    32028 \nstr(procate1)\nprocate1$Freq <- as.numeric(procate1$Freq)\nprocate2 <- as.data.frame(table(sub2$상품중분류명))\n## 대분류별 개수(식품>의류잡화 순)\nggplot(procate1, aes(Var1, Freq))+geom_histogram(stat=\"identity\", fill = c(1:7))\n## 중분류별 개수(가공식품>여성의류-SPA>농산물 순)\nggplot(procate2, aes(Var1, Freq))+geom_bar(stat=\"identity\", fill = \"red\")+theme(axis.text.x = element_text(angle=45,size=12))  \n## 15~16시 사이 시간대가 가장 많음.\nggplot(data=sub2, aes(구매시간))+geom_histogram(binwidth=0.5, fill = \"darkblue\") \n## 취소여부\ntable(sub2_num$취소여부)\n#     0     1 \n# 93333  8359\n\n## 구매지역(송파구>중구>안양시 순)\nloc <- as.data.frame(table(sub2$구매지역))\nstr(loc)\nggplot(loc, aes(Var1, Freq))+geom_histogram(stat=\"identity\")+theme(axis.text.x = element_text(angle=90,size=10, hjust = 1))  \n\ndemo2 <- read.table('subject2/1-1. Demo.txt',header=T, sep=\",\", stringsAsFactors = FALSE)\nstr(demo2)\n\n## 성별(여성이 3배 정보 많음)\ntable(demo2$성별)\n#   1    2 \n# 859 2683\n\n## 연령(63세 이후로 급격히 소비 감소)\nage <- as.data.frame(table(demo2$연령))\nggplot(data=age, aes(Var1, Freq))+geom_histogram(stat=\"identity\")\n\n## 거주지역(송파구>해운대구>고양시 순) - 거주하는사람이 많은 지역이 구매지역이 가장 많지는 않음.\nregion <- as.data.frame(table(demo2$거주지역))\nggplot(data=region, aes(Var1, Freq))+geom_histogram(stat=\"identity\")+theme(axis.text.x = element_text(angle=90, size=10, hjust=1))\n\nmerge_data2 <- merge(demo2, sub2, by=\"ID\")\nhead(merge_data2)\n\njpeg(\"구매시간에 따른 지역별 구매금액.jpeg\")\n# 구매지역별 구매시가넹 따른 구매금액 plot \nggplot(data=merge_data2, aes(x=구매시간, y=구매금액, colour = 구매지역))+geom_point()\ndev.off()\n\n# 상품분류별 구매금액\njpeg(\"상품분류별 구매금액.jpeg\")\nggplot(data=merge_data2, aes(x=상품중분류명, y=구매금액, color = 상품대분류명))+geom_boxplot() + theme(axis.text.x = element_text(angle=90, face=\"bold\", colour=\"black\"))\ndev.off()\n# + facet_grid(상품대분류명~.)+ theme(axis.text.x = element_text(angle=90, face=\"bold\", colour=\"black\"))\n\nhead(merge_data2)\n\n## 연령별 상품 구매금액합계\ngroup_age <- group_by(merge_data2, 연령, 상품대분류명, 상품중분류명)\ngroup_age.summary <- summarize(group_age, sumAmount=length(구매건수))\ngroup_age.arrange <- arrange(group_age.summary, desc(sumAmount))\nhead(group_age.arrange)\nggplot(group_age.arrange, aes(x=연령, y=sumAmount, colour= 상품대분류명))+geom_line()+facet_grid(상품대분류명~상품중분류명)\n\ngroup_buy <- subset(merge_data2, subset= 취소여부==0)\ngroup_buy_age <- group_by(group_buy, 연령, 상품대분류명, 상품중분류명)\ngroup_buy.summary <- summarize(group_buy_age, 구매건수합=length(구매수량))\n\nhead(group_buy.summary)\n\n### 구매건수 합과 구매/취소 비율 그래프 비교 과정\nmerge_data2_cancel <- subset(merge_data2, (취소여부==1))\nhead(merge_data2_cancel)\n\ngroup_cancel_age <- group_by(merge_data2_cancel, 연령, 상품대분류명, 상품중분류명)\ngroup_cancel.summary <- summarize(group_cancel_age, 취소건수합=sum(취소여부))\nhead(group_cancel.summary)\n\nbuy_plot <- ggplot(group_buy.summary, aes(x=연령, y=구매건수합)) +geom_bar(fill = \"darkblue\", stat=\"identity\")+\n  facet_grid(~상품대분류명)+\n  scale_y_continuous(limits=c(0,4000))\n\ncancel_rate_plot<- ggplot(mg, aes(x=연령, y=비율))+\n  geom_bar(fill = \"darkblue\", stat=\"identity\")+\n  facet_grid(~상품대분류명)\n\nmultiplot(buy_plot, cancel_rate_plot, cols=1)\n\n### 구매건수 합과 구매/취소 비율 그래프 비교\n############################################# 주제2 기본 EDA 끝 #################################################",
    "created" : 1456733570004.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2673926217",
    "id" : "A2E5FBE7",
    "lastKnownWriteTime" : 1454040934,
    "path" : "~/카카오톡 받은 파일/lpoint_subject2/lpoint_subject2.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "type" : "r_source"
}