{
    "contents" : "install.packages(\"ggmap\")\ninstall.packages(\"ggplot2\")\ninstall.packages(\"stringr\")\n\nlibrary(ggmap)\nlibrary(ggplot2)\nlibrary(stringr)\n\n# data load\nloc <- read.csv(\"./sample/서울_강동구_공영주차장_위경도.csv\", header=T)\n\nhead(loc)\n\n# 1. 지도를 가져온다.\n# get_map(\"위치\", 크기비율, 맵유형)\n# 맵유형 : (\"terrain(지역)\", \"terrain-background(지역배경)\", \"satellite(위성)\", \"roadmap(거리지도)\", \"hybrid(혼합)\")\nkd <- get_map(\"Amsa-dong\", zoom=13, maptype=\"hybrid\")\n\n# 2. 가져온 지도 위에 loc데이터의 위도(LON), 경도(LAT) point를 찍어준다.\nkor.map <- ggmap(kd)+geom_point(data=loc, aes(x=LON, y=LAT), size=3, alpha=1.0, color=\"red\") \n# 3. point의에 text를 loc데이터의 주차장명으로 찍어줌\nkor.map+geom_text(data=loc, aes(x=LON, y=LAT+0.001, label=주차장명), size=3)\n# 그림 저장\nggsave(\"kd.png\", dpi=500)\n\n## 시,구 구분해서 표시\n# 1. 시,구 문자만 뽑는다.\n# str_sub(뽑을문자열, 시작위치, 끝위치)\n# 시작위치나 끝위치나 -가 붙게되면 뒤에서부터 몇자리를 봅는다는 의미\nsubstr(loc$주차장명, -1,-2 )\n\n?substr\nloc2 <- str_sub(loc$주차장명, start=-2, end = -2)\nloc2\n?str_sub\nstr_sub(loc$주차장명, start=3, end = -1)\n\n# 2. 색깔을 넣을 color vector생성\ncolors <- c()\n\n\n\n# 3. 구면 red, 시면 blue 처리\nfor(x in 1:length(loc2)) {\n  if(loc2[x] == \"구\") {\n    colors <- c(colors,\"red\")\n  }\n  else {\n    colors <- c(colors, \"blue\")\n  }\n}\n\n# 4. 지도 부르기\nkd <- get_map(\"Amsa-dong\", zoom=13, maptype=\"roadmap\")\n# 5. 지도위에 포인트 추가\nkor.map <- ggmap(kd)+geom_point(data=loc, aes(x=LON, y=LAT), size=3, alpha=0.7, color=colors)\n# 6. 지도위 포인트에 명칭추가\nkor.map+geom_text(data=loc, aes(x=LON, y=LAT+0.001, label=주차장명), size=3)\n######################################################################################\n\n# ##### 지역별 인구현황 \nlibrary(grid)\n\npop <- read.csv(\"./sample/지역별인구현황_2014_4월기준.csv\", header=T)\n\nhead(pop)\npop\ndim(pop)\n\nlon <- pop$LON\nlat <- pop$LAT\n\ndata <- pop$총인구수\n# 지역위치별 총인구수를 구하기 때문에 데이터 가공\n  df <- data.frame(lon,lat, data)\nhead(df)\n# 1. 맵을 가져옴\nmap1 <- get_map(\"Korea\", zoom=7, maptype=\"roadmap\")\n# 2. 가져온 맵을 ggmap으로 올림\n\nmap1 <- ggmap(map1)\n\n# 3. ggmap에 point추가(색깔은 총인구수, 크기도 총인구수를 기준으로 표시)\nmap1+geom_point(aes(x=lon, y=lat, colour=data, size=data), data=df)\n###########################################################\n## 서울시 구청의 위치 \ngooData <- read.csv(\"./sample/서울시구청위치정보_new.csv\", header=T)\n\nhead(gooData)\n\nkd <- get_map(\"seoul\", zoom=11, maptype=\"hybrid\")\n\nseoul.map <- ggmap(kd)+geom_point(data=gooData, aes(x=LON, y=LAT), color=\"green\", alpha=1, size=5)\nseoul.map+geom_text(data=gooData, aes(x=LON, y=LAT+0.001, label=name), size=5)\n\n#############################################################\n## 서울시 장애인도서관과 장난감 도서관의 위치\nloc1 <- read.csv(\"./sample/지역별장애인도서관정보.csv\", header=T)\n\nhead(loc1)\ncolnames(loc1)\n\nloc2 <- read.csv(\"./sample/서울시장난감도서관위치현황.csv\", header=T)\n\nmap1 <- get_map(\"seoul\", zoom=11, maptype=\"roadmap\")\n\ndic.map <- ggmap(map1)+geom_point(data=loc1, aes(x=LON, y=LAT), color=\"red\", size=4, alpha=0.7) + geom_point(data=loc2, aes(x=LON, y=LAT), color=\"blue\", size=4, alpha=1)\n\ndic.map+geom_text(data=loc1, aes(x=LON, y=LAT+0.001, label=자치구명), size=3)\n\n####################################################################################\n\n## 2,3호선 위치 \nsubway3 <- read.csv(\"./sample/서울지하철3호선역위경도정보.csv\", header=T)\nsubway2 <- read.csv(\"./sample/서울지하철2호선위경도정보.csv\", header=T)\n\nmap <- get_map(\"seoul\", zoom=11, maptype=\"roadmap\")\n\nsub.map <- ggmap(map) + geom_point(data=subway2, aes(x=LON, y=LAT), color=\"green\", size=3, alpha=0.7) + geom_point(data=subway3, aes(x=LON, y=LAT), color=\"red\", size=3, alpha=0.7)\n\nsub.map + geom_text(data=subway2, aes(x=LON, y=LAT+0.01, label=역명), size=3) + geom_text(data=subway3, aes(x=LON, y=LAT+0.01, label=역명), size=3)\n\n##############################################\n\njeju <- read.csv(\"./sample/제주도여행코스_1일차.csv\", header=T)\n\njejumap <- get_map(\"Hallasan\", zoom=11, maptype=\"hybrid\")\njejumap\n\npath.map <- ggmap(jejumap)+geom_point(data=jeju, aes(x=LON, y=LAT), color=\"red\", size=3, alpha=0.5)\n\npath.map +geom_text(data=jeju, aes(x=LON, y=LAT+0.01, label=장소), size=3) + geom_path(data=jeju, aes(x=LON, y=LAT), size=1, linetype=2, col=\"blue\")\n",
    "created" : 1437050945098.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1584174272",
    "id" : "AAF4C5B2",
    "lastKnownWriteTime" : 1437199986,
    "path" : "C:/RCodeRepositories/Rlov/fixedData/ggplot_ggmap.R",
    "project_path" : "ggplot_ggmap.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}